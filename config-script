#!/bin/env sh

[ $(id -u) -eq 0 ] && echo 'This script should not be ran as root' && exit 1

PROF_DIR=profile.default-release

git clone https://github.com/ghacksuserjs/ghacks-user.js.git

echo 'Generating custom firefox config'
cp -fr ghacks-user.js/user.js $PROF_DIR/
cat custom-user.js >> $PROF_DIR/user.js

echo 'Installing config to firefox'
dir_count=0
for i in ~/.mozilla/firefox/*.default-release/; do
	((++i))
	cp -fr $PROF_DIR/* $i
done

[ $dir_count -eq 0 ] && echo 'No FireFox directories were found. Was FireFox ran atleast once after install?' && exit 1

echo 'FireFox successfully configured however theme and search engine must be set manually. See README for more info.'
